<app-admin-layout>
<div class="admin-page">
  <div class="admin-container">
    <!-- Loading State -->
    <div class="admin-loading-state" *ngIf="isLoading">
      <div class="admin-spinner"></div>
      <p>Einstellungen werden geladen...</p>
    </div>

    <!-- Settings Form -->
    <div class="settings-content" *ngIf="!isLoading && settings">
      <form #settingsForm="ngForm" (ngSubmit)="saveSettings()" class="settings-form">
        
        <!-- Maintenance Section -->
        <section class="admin-card">
          <div class="admin-card__header">
            <h2 class="admin-card__title">
              <span class="material-symbols-outlined">engineering</span>
              Wartungsmodus
            </h2>
          </div>
          
          <div class="admin-card__body">
            <div class="admin-form-group switch-group">
              <label class="switch">
                <input type="checkbox" 
                       [(ngModel)]="formData.isUnderConstruction" 
                       name="isUnderConstruction">
                <span class="slider"></span>
              </label>
              <div class="switch-label">
                <span class="label-text">Wartungsmodus aktiviert</span>
                <span class="admin-badge" [class.admin-badge--success]="formData.isUnderConstruction" [class.admin-badge--muted]="!formData.isUnderConstruction">
                  {{ formData.isUnderConstruction ? 'Aktiv' : 'Inaktiv' }}
                </span>
              </div>
            </div>

            <div class="admin-form-group" *ngIf="formData.isUnderConstruction">
              <label for="maintenanceMessage">Wartungsnachricht</label>
              <textarea id="maintenanceMessage" 
                        class="admin-textarea"
                        [(ngModel)]="formData.maintenanceMessage"
                        name="maintenanceMessage"
                        rows="3"
                        placeholder="Die Seite wird gerade gewartet...">
              </textarea>
            </div>

            <div class="admin-form-group" *ngIf="formData.isUnderConstruction">
              <label for="maintenancePassword">Wartungs-Passwort</label>
              <input type="text" 
                     id="maintenancePassword"
                     class="admin-input"
                     [(ngModel)]="formData.maintenancePassword"
                     name="maintenancePassword"
                     placeholder="z.B. lm">
              <span class="admin-help-text">Mit diesem Passwort kann die Seite trotz Wartungsmodus betreten werden</span>
            </div>
          </div>
        </section>

        <!-- Site Settings Section -->
        <section class="admin-card">
          <div class="admin-card__header">
            <h2 class="admin-card__title">
              <span class="material-symbols-outlined">language</span>
              Allgemeine Einstellungen
            </h2>
          </div>

          <div class="admin-card__body">
            <div class="form-row">
              <div class="admin-form-group">
                <label for="siteTitle">Seitentitel</label>
                <input type="text" 
                       id="siteTitle"
                       class="admin-input"
                       [(ngModel)]="formData.siteTitle"
                       name="siteTitle"
                       placeholder="Leonards & Brandenburger IT">
              </div>

              <div class="admin-form-group">
                <label for="contactEmail">Kontakt E-Mail</label>
                <input type="email" 
                       id="contactEmail"
                       class="admin-input"
                       [(ngModel)]="formData.contactEmail"
                       name="contactEmail"
                       placeholder="tom@Leonards & Brandenburger IT.de">
              </div>
            </div>

            <div class="admin-form-group">
              <label for="siteDescription">Seitenbeschreibung</label>
              <textarea id="siteDescription" 
                        class="admin-textarea"
                        [(ngModel)]="formData.siteDescription"
                        name="siteDescription"
                        rows="2"
                        placeholder="Webentwicklung und digitale Lösungen">
              </textarea>
            </div>

            <div class="admin-form-group">
              <label for="contactPhone">Kontakt Telefon</label>
              <input type="tel" 
                     id="contactPhone"
                     class="admin-input"
                     [(ngModel)]="formData.contactPhone"
                     name="contactPhone"
                     placeholder="+49 123 456789">
            </div>
          </div>
        </section>

        <!-- Features Section -->
        <section class="admin-card">
          <div class="admin-card__header">
            <h2 class="admin-card__title">
              <span class="material-symbols-outlined">toggle_on</span>
              Funktionen
            </h2>
          </div>

          <div class="admin-card__body">
            <div class="admin-form-group switch-group">
              <label class="switch">
                <input type="checkbox" 
                       [(ngModel)]="formData.allowRegistration" 
                       name="allowRegistration">
                <span class="slider"></span>
              </label>
              <div class="switch-label">
                <span class="label-text">Registrierung erlauben</span>
                <span class="admin-help-text">Neue Benutzer können sich registrieren</span>
              </div>
            </div>

            <div class="admin-form-group switch-group">
              <label class="switch">
                <input type="checkbox" 
                       [(ngModel)]="formData.allowNewsletter" 
                       name="allowNewsletter">
                <span class="slider"></span>
              </label>
              <div class="switch-label">
                <span class="label-text">Newsletter-Anmeldung erlauben</span>
                <span class="admin-help-text">Newsletter-Formular wird angezeigt</span>
              </div>
            </div>
          </div>
        </section>

        <!-- Actions -->
        <div class="admin-header-actions" style="margin-top: 1.5rem;">
          <button type="button" 
                  class="admin-btn admin-btn--secondary" 
                  (click)="resetForm()"
                  [disabled]="isSaving">
            <span class="material-symbols-outlined">restart_alt</span>
            Zurücksetzen
          </button>
          <button type="submit" 
                  class="admin-btn admin-btn--primary" 
                  [disabled]="isSaving || settingsForm.invalid">
            <span class="material-symbols-outlined" *ngIf="!isSaving">save</span>
            <div class="admin-spinner" style="width: 16px; height: 16px;" *ngIf="isSaving"></div>
            {{ isSaving ? 'Speichern...' : 'Speichern' }}
          </button>
        </div>
      </form>

      <!-- Info Box -->
      <div class="admin-card" style="margin-top: 1.5rem; background: rgba(59, 130, 246, 0.05);">
        <div class="admin-card__body" style="display: flex; gap: 0.75rem; align-items: flex-start;">
          <span class="material-symbols-outlined" style="color: #3b82f6;">info</span>
          <div>
            <strong>Hinweis:</strong> Änderungen am Wartungsmodus werden sofort wirksam. 
            Besucher sehen dann die Wartungsseite, bis der Modus deaktiviert wird oder sie das Passwort eingeben.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</app-admin-layout>