<div class="landing" *ngIf="!loading" @fadeIn>

  <!-- Animated background orbs -->
  <div class="bg-orbs">
    <div class="orb orb--1"></div>
    <div class="orb orb--2"></div>
    <div class="orb orb--3"></div>
  </div>

  <!-- Hero -->
  <div class="hero" @fadeUp>
    <img class="hero__logo" src="assets/logos/lm_s.png" alt="MailFlow" />
    <h1 class="hero__title">MailFlow</h1>
    <p class="hero__greeting">{{ getGreeting() }} &mdash; {{ formattedDate }}</p>
  </div>

  <!-- Stats 4Ã—2 -->
  <div class="stats" @staggerCards>
    <button class="stat-card" (click)="router.navigate(['/emails'])">
      <span class="stat-card__icon"><span class="material-symbols-outlined">inbox</span></span>
      <span class="stat-card__val">{{ emailStats.inbox }}</span>
      <span class="stat-card__lbl">Posteingang</span>
    </button>
    <button class="stat-card" (click)="router.navigate(['/emails'])">
      <span class="stat-card__icon unread"><span class="material-symbols-outlined">mark_email_unread</span></span>
      <span class="stat-card__val">{{ emailStats.unread }}</span>
      <span class="stat-card__lbl">Ungelesen</span>
    </button>
    <button class="stat-card" (click)="router.navigate(['/history'])">
      <span class="stat-card__icon sent"><span class="material-symbols-outlined">send</span></span>
      <span class="stat-card__val">{{ emailStats.sent }}</span>
      <span class="stat-card__lbl">Gesendet</span>
    </button>
    <button class="stat-card" (click)="router.navigate(['/history'])">
      <span class="stat-card__icon trash"><span class="material-symbols-outlined">delete</span></span>
      <span class="stat-card__val">{{ emailStats.trash }}</span>
      <span class="stat-card__lbl">Papierkorb</span>
    </button>
    <button class="stat-card" (click)="router.navigate(['/templates'])">
      <span class="stat-card__icon tmpl"><span class="material-symbols-outlined">description</span></span>
      <span class="stat-card__val">{{ templateCount }}</span>
      <span class="stat-card__lbl">Vorlagen</span>
    </button>
    <button class="stat-card" (click)="router.navigate(['/admin'])">
      <span class="stat-card__icon ai"><span class="material-symbols-outlined">auto_awesome</span></span>
      <span class="stat-card__val">{{ aiStats?.totalRequests ?? 0 }}</span>
      <span class="stat-card__lbl">KI-Anfragen</span>
    </button>
    <button class="stat-card" (click)="router.navigate(['/admin'])">
      <span class="stat-card__icon tokens"><span class="material-symbols-outlined">token</span></span>
      <span class="stat-card__val">{{ aiStats ? (aiStats.totalTokens / 1000).toFixed(0) + 'k' : '0k' }}</span>
      <span class="stat-card__lbl">Tokens</span>
    </button>
    <button class="stat-card" (click)="router.navigate(['/admin'])">
      <span class="stat-card__icon cost"><span class="material-symbols-outlined">payments</span></span>
      <span class="stat-card__val">{{ formatCost(aiStats?.totalCostUsd ?? 0) }}</span>
      <span class="stat-card__lbl">KI-Kosten</span>
    </button>
  </div>

  <!-- CTA -->
  <div class="cta" @fadeUp>
    <button class="cta__btn" (click)="router.navigate(['/emails'])">
      <span class="material-symbols-outlined">arrow_forward</span>
      Zum Posteingang
    </button>
  </div>
</div>

<!-- Loading -->
<div class="loading-screen" *ngIf="loading">
  <div class="loader"></div>
</div>